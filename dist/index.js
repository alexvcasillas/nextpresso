#!/usr/bin/env node
"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function createCommonjsModule(e,r){return r={exports:{}},e(r,r.exports),r.exports}function buildGraph(){for(var e={},r=Object.keys(conversions),t=r.length,n=0;n<t;n++)e[r[n]]={distance:-1,parent:null};return e}function deriveBFS(e){var r=buildGraph(),t=[e];for(r[e].distance=0;t.length;)for(var n=t.pop(),o=Object.keys(conversions[n]),s=o.length,a=0;a<s;a++){var i=o[a],l=r[i];-1===l.distance&&(l.distance=r[n].distance+1,l.parent=n,t.unshift(i))}return r}function link(e,r){return function(t){return r(e(t))}}function wrapConversion(e,r){for(var t=[r[e].parent,e],n=conversions[r[e].parent][e],o=r[e].parent;r[o].parent;)t.unshift(r[o].parent),n=link(conversions[r[o].parent][o],n),o=r[o].parent;return n.conversion=t,n}function wrapRaw(e){var r=function(r){return void 0===r||null===r?r:(arguments.length>1&&(r=Array.prototype.slice.call(arguments)),e(r))};return"conversion"in e&&(r.conversion=e.conversion),r}function wrapRounded(e){var r=function(r){if(void 0===r||null===r)return r;arguments.length>1&&(r=Array.prototype.slice.call(arguments));var t=e(r);if("object"==typeof t)for(var n=t.length,o=0;o<n;o++)t[o]=Math.round(t[o]);return t};return"conversion"in e&&(r.conversion=e.conversion),r}function Chalk(e){this.enabled=e&&void 0!==e.enabled?e.enabled:supportsColor$3}function build(e){var r=function(){return applyStyle.apply(r,arguments)};return r._styles=e,r.enabled=this.enabled,r.__proto__=proto,r}function applyStyle(){var e=arguments,r=e.length,t=0!==r&&String(arguments[0]);if(r>1)for(var n=1;n<r;n++)t+=" "+e[n];if(!this.enabled||!t)return t;var o=this._styles,s=o.length,a=ansiStyles$3.dim.open;for(!isSimpleWindowsTerm||-1===o.indexOf("gray")&&-1===o.indexOf("grey")||(ansiStyles$3.dim.open="");s--;){var i=ansiStyles$3[o[s]];t=i.open+t.replace(i.closeRe,i.open)+i.close}return ansiStyles$3.dim.open=a,t}function init(){var e={};return Object.keys(styles).forEach(function(r){e[r]={get:function(){return build.call(this,[r])}}}),e}function unload(){loaded&&(loaded=!1,signals.forEach(function(e){try{process.removeListener(e,sigListeners[e])}catch(e){}}),process.emit=originalProcessEmit,process.reallyExit=originalProcessReallyExit,emitter.count-=1)}function emit(e,r,t){emitter.emitted[e]||(emitter.emitted[e]=!0,emitter.emit(e,r,t))}function load(){loaded||(loaded=!0,emitter.count+=1,signals=signals.filter(function(e){try{return process.on(e,sigListeners[e]),!0}catch(e){return!1}}),process.emit=processEmit,process.reallyExit=processReallyExit)}function processReallyExit(e){process.exitCode=e||0,emit("exit",process.exitCode,null),emit("afterexit",process.exitCode,null),originalProcessReallyExit.call(process,process.exitCode)}function processEmit(e,r){if("exit"===e){void 0!==r&&(process.exitCode=r);var t=originalProcessEmit.apply(this,arguments);return emit("exit",process.exitCode,null),emit("afterexit",process.exitCode,null),t}return originalProcessEmit.apply(this,arguments)}function Chalk$1(e){this.enabled=e&&void 0!==e.enabled?e.enabled:supportsColor$6}function build$1(e){var r=function(){return applyStyle$1.apply(r,arguments)};return r._styles=e,r.enabled=this.enabled,r.__proto__=proto$1,r}function applyStyle$1(){var e=arguments,r=e.length,t=0!==r&&String(arguments[0]);if(r>1)for(var n=1;n<r;n++)t+=" "+e[n];if(!this.enabled||!t)return t;var o=this._styles,s=o.length,a=ansiStyles$6.dim.open;for(!isSimpleWindowsTerm$1||-1===o.indexOf("gray")&&-1===o.indexOf("grey")||(ansiStyles$6.dim.open="");s--;){var i=ansiStyles$6[o[s]];t=i.open+t.replace(i.closeRe,i.open)+i.close}return ansiStyles$6.dim.open=a,t}function init$1(){var e={};return Object.keys(styles$1).forEach(function(r){e[r]={get:function(){return build$1.call(this,[r])}}}),e}var program=require("commander"),fsExtra=require("fs-extra"),util=require("util"),path=require("path"),os=_interopDefault(require("os")),assert=_interopDefault(require("assert")),events=_interopDefault(require("events")),inquirer=require("inquirer"),child_process=require("child_process"),shiftParser=require("shift-parser"),codegen=_interopDefault(require("shift-codegen"));require("shift-traverse");var prettier=_interopDefault(require("prettier")),matchOperatorsRe=/[|\\{}()[\]^$+*?.]/g,escapeStringRegexp=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(matchOperatorsRe,"\\$&")},colorName={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},conversions=createCommonjsModule(function(e){function r(e,r){return Math.pow(e[0]-r[0],2)+Math.pow(e[1]-r[1],2)+Math.pow(e[2]-r[2],2)}var t={};for(var n in colorName)colorName.hasOwnProperty(n)&&(t[colorName[n]]=n);var o=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var s in o)if(o.hasOwnProperty(s)){if(!("channels"in o[s]))throw new Error("missing channels property: "+s);if(!("labels"in o[s]))throw new Error("missing channel labels property: "+s);if(o[s].labels.length!==o[s].channels)throw new Error("channel and label counts mismatch: "+s);var a=o[s].channels,i=o[s].labels;delete o[s].channels,delete o[s].labels,Object.defineProperty(o[s],"channels",{value:a}),Object.defineProperty(o[s],"labels",{value:i})}o.rgb.hsl=function(e){var r,t,n,o=e[0]/255,s=e[1]/255,a=e[2]/255,i=Math.min(o,s,a),l=Math.max(o,s,a),c=l-i;return l===i?r=0:o===l?r=(s-a)/c:s===l?r=2+(a-o)/c:a===l&&(r=4+(o-s)/c),(r=Math.min(60*r,360))<0&&(r+=360),n=(i+l)/2,t=l===i?0:n<=.5?c/(l+i):c/(2-l-i),[r,100*t,100*n]},o.rgb.hsv=function(e){var r,t,n,o=e[0],s=e[1],a=e[2],i=Math.min(o,s,a),l=Math.max(o,s,a),c=l-i;return t=0===l?0:c/l*1e3/10,l===i?r=0:o===l?r=(s-a)/c:s===l?r=2+(a-o)/c:a===l&&(r=4+(o-s)/c),(r=Math.min(60*r,360))<0&&(r+=360),n=l/255*1e3/10,[r,t,n]},o.rgb.hwb=function(e){var r=e[0],t=e[1],n=e[2],s=o.rgb.hsl(e)[0],a=1/255*Math.min(r,Math.min(t,n));return n=1-1/255*Math.max(r,Math.max(t,n)),[s,100*a,100*n]},o.rgb.cmyk=function(e){var r,t,n,o,s=e[0]/255,a=e[1]/255,i=e[2]/255;return o=Math.min(1-s,1-a,1-i),r=(1-s-o)/(1-o)||0,t=(1-a-o)/(1-o)||0,n=(1-i-o)/(1-o)||0,[100*r,100*t,100*n,100*o]},o.rgb.keyword=function(e){var n=t[e];if(n)return n;var o,s=1/0;for(var a in colorName)if(colorName.hasOwnProperty(a)){var i=r(e,colorName[a]);i<s&&(s=i,o=a)}return o},o.keyword.rgb=function(e){return colorName[e]},o.rgb.xyz=function(e){var r=e[0]/255,t=e[1]/255,n=e[2]/255;return[100*(.4124*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.3576*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*r+.7152*t+.0722*n),100*(.0193*r+.1192*t+.9505*n)]},o.rgb.lab=function(e){var r,t,n,s=o.rgb.xyz(e),a=s[0],i=s[1],l=s[2];return a/=95.047,i/=100,l/=108.883,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,l=l>.008856?Math.pow(l,1/3):7.787*l+16/116,r=116*i-16,t=500*(a-i),n=200*(i-l),[r,t,n]},o.hsl.rgb=function(e){var r,t,n,o,s,a=e[0]/360,i=e[1]/100,l=e[2]/100;if(0===i)return s=255*l,[s,s,s];r=2*l-(t=l<.5?l*(1+i):l+i-l*i),o=[0,0,0];for(var c=0;c<3;c++)(n=a+1/3*-(c-1))<0&&n++,n>1&&n--,s=6*n<1?r+6*(t-r)*n:2*n<1?t:3*n<2?r+(t-r)*(2/3-n)*6:r,o[c]=255*s;return o},o.hsl.hsv=function(e){var r,t,n=e[0],o=e[1]/100,s=e[2]/100,a=o,i=Math.max(s,.01);return s*=2,o*=s<=1?s:2-s,a*=i<=1?i:2-i,t=(s+o)/2,r=0===s?2*a/(i+a):2*o/(s+o),[n,100*r,100*t]},o.hsv.rgb=function(e){var r=e[0]/60,t=e[1]/100,n=e[2]/100,o=Math.floor(r)%6,s=r-Math.floor(r),a=255*n*(1-t),i=255*n*(1-t*s),l=255*n*(1-t*(1-s));switch(n*=255,o){case 0:return[n,l,a];case 1:return[i,n,a];case 2:return[a,n,l];case 3:return[a,i,n];case 4:return[l,a,n];case 5:return[n,a,i]}},o.hsv.hsl=function(e){var r,t,n,o=e[0],s=e[1]/100,a=e[2]/100,i=Math.max(a,.01);return n=(2-s)*a,r=(2-s)*i,t=s*i,t/=r<=1?r:2-r,t=t||0,n/=2,[o,100*t,100*n]},o.hwb.rgb=function(e){var r,t,n,o,s=e[0]/360,a=e[1]/100,i=e[2]/100,l=a+i;l>1&&(a/=l,i/=l),t=1-i,n=6*s-(r=Math.floor(6*s)),0!=(1&r)&&(n=1-n),o=a+n*(t-a);var c,u,p;switch(r){default:case 6:case 0:c=t,u=o,p=a;break;case 1:c=o,u=t,p=a;break;case 2:c=a,u=t,p=o;break;case 3:c=a,u=o,p=t;break;case 4:c=o,u=a,p=t;break;case 5:c=t,u=a,p=o}return[255*c,255*u,255*p]},o.cmyk.rgb=function(e){var r,t,n,o=e[0]/100,s=e[1]/100,a=e[2]/100,i=e[3]/100;return r=1-Math.min(1,o*(1-i)+i),t=1-Math.min(1,s*(1-i)+i),n=1-Math.min(1,a*(1-i)+i),[255*r,255*t,255*n]},o.xyz.rgb=function(e){var r,t,n,o=e[0]/100,s=e[1]/100,a=e[2]/100;return r=3.2406*o+-1.5372*s+-.4986*a,t=-.9689*o+1.8758*s+.0415*a,n=.0557*o+-.204*s+1.057*a,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,t=t>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,r=Math.min(Math.max(0,r),1),t=Math.min(Math.max(0,t),1),n=Math.min(Math.max(0,n),1),[255*r,255*t,255*n]},o.xyz.lab=function(e){var r,t,n,o=e[0],s=e[1],a=e[2];return o/=95.047,s/=100,a/=108.883,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,r=116*s-16,t=500*(o-s),n=200*(s-a),[r,t,n]},o.lab.xyz=function(e){var r,t,n,o=e[0];r=e[1]/500+(t=(o+16)/116),n=t-e[2]/200;var s=Math.pow(t,3),a=Math.pow(r,3),i=Math.pow(n,3);return t=s>.008856?s:(t-16/116)/7.787,r=a>.008856?a:(r-16/116)/7.787,n=i>.008856?i:(n-16/116)/7.787,r*=95.047,t*=100,n*=108.883,[r,t,n]},o.lab.lch=function(e){var r,t,n,o=e[0],s=e[1],a=e[2];return r=Math.atan2(a,s),(t=360*r/2/Math.PI)<0&&(t+=360),n=Math.sqrt(s*s+a*a),[o,n,t]},o.lch.lab=function(e){var r,t,n,o=e[0],s=e[1];return n=e[2]/360*2*Math.PI,r=s*Math.cos(n),t=s*Math.sin(n),[o,r,t]},o.rgb.ansi16=function(e){var r=e[0],t=e[1],n=e[2],s=1 in arguments?arguments[1]:o.rgb.hsv(e)[2];if(0===(s=Math.round(s/50)))return 30;var a=30+(Math.round(n/255)<<2|Math.round(t/255)<<1|Math.round(r/255));return 2===s&&(a+=60),a},o.hsv.ansi16=function(e){return o.rgb.ansi16(o.hsv.rgb(e),e[2])},o.rgb.ansi256=function(e){var r=e[0],t=e[1],n=e[2];if(r===t&&t===n)return r<8?16:r>248?231:Math.round((r-8)/247*24)+232;return 16+36*Math.round(r/255*5)+6*Math.round(t/255*5)+Math.round(n/255*5)},o.ansi16.rgb=function(e){var r=e%10;if(0===r||7===r)return e>50&&(r+=3.5),r=r/10.5*255,[r,r,r];var t=.5*(1+~~(e>50));return[(1&r)*t*255,(r>>1&1)*t*255,(r>>2&1)*t*255]},o.ansi256.rgb=function(e){if(e>=232){var r=10*(e-232)+8;return[r,r,r]}e-=16;var t;return[Math.floor(e/36)/5*255,Math.floor((t=e%36)/6)/5*255,t%6/5*255]},o.rgb.hex=function(e){var r=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(r.length)+r},o.hex.rgb=function(e){var r=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!r)return[0,0,0];var t=r[0];3===r[0].length&&(t=t.split("").map(function(e){return e+e}).join(""));var n=parseInt(t,16);return[n>>16&255,n>>8&255,255&n]},o.rgb.hcg=function(e){var r,t,n=e[0]/255,o=e[1]/255,s=e[2]/255,a=Math.max(Math.max(n,o),s),i=Math.min(Math.min(n,o),s),l=a-i;return r=l<1?i/(1-l):0,t=l<=0?0:a===n?(o-s)/l%6:a===o?2+(s-n)/l:4+(n-o)/l+4,t/=6,t%=1,[360*t,100*l,100*r]},o.hsl.hcg=function(e){var r=e[1]/100,t=e[2]/100,n=1,o=0;return(n=t<.5?2*r*t:2*r*(1-t))<1&&(o=(t-.5*n)/(1-n)),[e[0],100*n,100*o]},o.hsv.hcg=function(e){var r=e[1]/100,t=e[2]/100,n=r*t,o=0;return n<1&&(o=(t-n)/(1-n)),[e[0],100*n,100*o]},o.hcg.rgb=function(e){var r=e[0]/360,t=e[1]/100,n=e[2]/100;if(0===t)return[255*n,255*n,255*n];var o=[0,0,0],s=r%1*6,a=s%1,i=1-a,l=0;switch(Math.floor(s)){case 0:o[0]=1,o[1]=a,o[2]=0;break;case 1:o[0]=i,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=a;break;case 3:o[0]=0,o[1]=i,o[2]=1;break;case 4:o[0]=a,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=i}return l=(1-t)*n,[255*(t*o[0]+l),255*(t*o[1]+l),255*(t*o[2]+l)]},o.hcg.hsv=function(e){var r=e[1]/100,t=r+e[2]/100*(1-r),n=0;return t>0&&(n=r/t),[e[0],100*n,100*t]},o.hcg.hsl=function(e){var r=e[1]/100,t=e[2]/100*(1-r)+.5*r,n=0;return t>0&&t<.5?n=r/(2*t):t>=.5&&t<1&&(n=r/(2*(1-t))),[e[0],100*n,100*t]},o.hcg.hwb=function(e){var r=e[1]/100,t=r+e[2]/100*(1-r);return[e[0],100*(t-r),100*(1-t)]},o.hwb.hcg=function(e){var r=e[1]/100,t=1-e[2]/100,n=t-r,o=0;return n<1&&(o=(t-n)/(1-n)),[e[0],100*n,100*o]},o.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},o.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},o.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},o.gray.hsl=o.gray.hsv=function(e){return[0,0,e[0]]},o.gray.hwb=function(e){return[0,100,e[0]]},o.gray.cmyk=function(e){return[0,0,0,e[0]]},o.gray.lab=function(e){return[e[0],0,0]},o.gray.hex=function(e){var r=255&Math.round(e[0]/100*255),t=((r<<16)+(r<<8)+r).toString(16).toUpperCase();return"000000".substring(t.length)+t},o.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}}),conversions_1=conversions.rgb,conversions_2=conversions.hsl,conversions_3=conversions.hsv,conversions_4=conversions.hwb,conversions_5=conversions.cmyk,conversions_6=conversions.xyz,conversions_7=conversions.lab,conversions_8=conversions.lch,conversions_9=conversions.hex,conversions_10=conversions.keyword,conversions_11=conversions.ansi16,conversions_12=conversions.ansi256,conversions_13=conversions.hcg,conversions_14=conversions.apple,conversions_15=conversions.gray,route=function(e){for(var r=deriveBFS(e),t={},n=Object.keys(r),o=n.length,s=0;s<o;s++){var a=n[s];null!==r[a].parent&&(t[a]=wrapConversion(a,r))}return t},convert={},models=Object.keys(conversions);models.forEach(function(e){convert[e]={},Object.defineProperty(convert[e],"channels",{value:conversions[e].channels}),Object.defineProperty(convert[e],"labels",{value:conversions[e].labels});var r=route(e);Object.keys(r).forEach(function(t){var n=r[t];convert[e][t]=wrapRounded(n),convert[e][t].raw=wrapRaw(n)})});var colorConvert=convert,ansiStyles=createCommonjsModule(function(e){const r=(e,r)=>(function(){return`[${e.apply(colorConvert,arguments)+r}m`}),t=(e,r)=>(function(){const t=e.apply(colorConvert,arguments);return`[${38+r};5;${t}m`}),n=(e,r)=>(function(){const t=e.apply(colorConvert,arguments);return`[${38+r};2;${t[0]};${t[1]};${t[2]}m`});Object.defineProperty(e,"exports",{enumerable:!0,get:function(){const e=new Map,o={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};o.color.grey=o.color.gray;for(const r of Object.keys(o)){const t=o[r];for(const r of Object.keys(t)){const n=t[r];o[r]={open:`[${n[0]}m`,close:`[${n[1]}m`},t[r]=o[r],e.set(n[0],n[1])}Object.defineProperty(o,r,{value:t,enumerable:!1}),Object.defineProperty(o,"codes",{value:e,enumerable:!1})}const s=(e,r,t)=>[e,r,t];o.color.close="[39m",o.bgColor.close="[49m",o.color.ansi={},o.color.ansi256={},o.color.ansi16m={rgb:n(s,0)},o.bgColor.ansi={},o.bgColor.ansi256={},o.bgColor.ansi16m={rgb:n(s,10)};for(const e of Object.keys(colorConvert)){if("object"!=typeof colorConvert[e])continue;const s=colorConvert[e];"ansi16"in s&&(o.color.ansi[e]=r(s.ansi16,0),o.bgColor.ansi[e]=r(s.ansi16,10)),"ansi256"in s&&(o.color.ansi256[e]=t(s.ansi256,0),o.bgColor.ansi256[e]=t(s.ansi256,10)),"rgb"in s&&(o.color.ansi16m[e]=n(s.rgb,0),o.bgColor.ansi16m[e]=n(s.rgb,10))}return o}})}),hasFlag=function(e,r){var t=(r=r||process.argv).indexOf("--"),n=/^-{1,2}/.test(e)?"":"--",o=r.indexOf(n+e);return-1!==o&&(-1===t||o<t)},supportsColor=createCommonjsModule(function(e){const r=process.env;let t=(()=>{if(hasFlag("no-color")||hasFlag("no-colors")||hasFlag("color=false"))return 0;if(hasFlag("color=16m")||hasFlag("color=full")||hasFlag("color=truecolor"))return 3;if(hasFlag("color=256"))return 2;if(hasFlag("color")||hasFlag("colors")||hasFlag("color=true")||hasFlag("color=always"))return 1;if(process.stdout&&!process.stdout.isTTY)return 0;if("win32"===process.platform){const e=os.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?2:1}if("CI"in r)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(e=>e in r)||"codeship"===r.CI_NAME?1:0;if("TEAMCITY_VERSION"in r)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(r.TEAMCITY_VERSION)?1:0;if("TERM_PROGRAM"in r){const e=parseInt((r.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(r.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(r.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(r.TERM)?1:"COLORTERM"in r?1:(r.TERM,0)})();"FORCE_COLOR"in r&&(t=0===parseInt(r.FORCE_COLOR,10)?0:t||1),e.exports=process&&(e=>0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3})(t)}),templates=createCommonjsModule(function(e){function r(e){return"u"===e[0]&&5===e.length||"x"===e[0]&&3===e.length?String.fromCharCode(parseInt(e.slice(1),16)):l.get(e)||e}function t(e,t){const n=[],o=t.trim().split(/\s*,\s*/g);let s;for(const t of o)if(isNaN(t)){if(!(s=t.match(a)))throw new Error(`Invalid Chalk template style argument: ${t} (in style '${e}')`);n.push(s[2].replace(i,(e,t,n)=>t?r(t):n))}else n.push(Number(t));return n}function n(e,r){const t={};for(const e of r)for(const r of e.styles)t[r[0]]=e.inverse?null:r.slice(1);let n=e;for(const e of Object.keys(t))if(Array.isArray(t[e])){if(!(e in n))throw new Error(`Unknown Chalk style: ${e}`);n=t[e].length>0?n[e].apply(n,t[e]):n[e]}return n}const o=/(?:\\(u[a-f\d]{4}|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,s=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,a=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,i=/\\(u[a-f\d]{4}|x[a-f\d]{2}|.)|([^\\])/gi,l=new Map([["n","\n"],["r","\r"],["t","\t"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e",""],["a",""]]);e.exports=((e,a)=>{const i=[],l=[];let c=[];if(a.replace(o,(o,a,u,p,g,h)=>{if(a)c.push(r(a));else if(p){const r=c.join("");c=[],l.push(0===i.length?r:n(e,i)(r)),i.push({inverse:u,styles:function(e){s.lastIndex=0;const r=[];let n;for(;null!==(n=s.exec(e));){const e=n[1];if(n[2]){const o=t(e,n[2]);r.push([e].concat(o))}else r.push([e])}return r}(p)})}else if(g){if(0===i.length)throw new Error("Found extraneous } in Chalk template literal");l.push(n(e,i)(c.join(""))),c=[],i.pop()}else c.push(h)}),l.push(c.join("")),i.length>0){const e=`Chalk template literal is missing ${i.length} closing bracket${1===i.length?"":"s"} (\`}\`)`;throw new Error(e)}return l.join("")})}),chalk=createCommonjsModule(function(e){function r(e,r){r=r||{};const t=supportsColor?supportsColor.level:0;e.level=void 0===r.level?t:r.level,e.enabled="enabled"in r?r.enabled:e.level>0}function t(e){if(!this||!(this instanceof t)||this.template){const n={};return r(n,e),n.template=function(){const e=[].slice.call(arguments);return function(e,r){if(!Array.isArray(r))return[].slice.call(arguments,1).join(" ");const t=[].slice.call(arguments,2),n=[r.raw[0]];for(let e=1;e<r.length;e++)n.push(String(t[e-1]).replace(/[{}\\]/g,"\\$&")),n.push(String(r.raw[e]));return templates(e,n.join(""))}.apply(null,[n.template].concat(e))},Object.setPrototypeOf(n,t.prototype),Object.setPrototypeOf(n.template,n),n.template.constructor=t,n.template}r(this,e)}function n(e,r,t){const n=function(){return function(){const e=arguments,r=e.length;let t=String(arguments[0]);if(0===r)return"";if(r>1)for(let n=1;n<r;n++)t+=" "+e[n];if(!this.enabled||this.level<=0||!t)return this._empty?"":t;const n=ansiStyles.dim.open;o&&this.hasGrey&&(ansiStyles.dim.open="");for(const e of this._styles.slice().reverse())t=(t=e.open+t.replace(e.closeRe,e.open)+e.close).replace(/\r?\n/g,`${e.close}$&${e.open}`);return ansiStyles.dim.open=n,t}.apply(n,arguments)};n._styles=e,n._empty=r;const s=this;return Object.defineProperty(n,"level",{enumerable:!0,get:()=>s.level,set(e){s.level=e}}),Object.defineProperty(n,"enabled",{enumerable:!0,get:()=>s.enabled,set(e){s.enabled=e}}),n.hasGrey=this.hasGrey||"gray"===t||"grey"===t,n.__proto__=l,n}const o="win32"===process.platform&&!(process.env.TERM||"").toLowerCase().startsWith("xterm"),s=["ansi","ansi","ansi256","ansi16m"],a=new Set(["gray"]),i=Object.create(null);o&&(ansiStyles.blue.open="[94m");for(const e of Object.keys(ansiStyles))ansiStyles[e].closeRe=new RegExp(escapeStringRegexp(ansiStyles[e].close),"g"),i[e]={get(){const r=ansiStyles[e];return n.call(this,this._styles?this._styles.concat(r):[r],this._empty,e)}};i.visible={get(){return n.call(this,this._styles||[],!0,"visible")}},ansiStyles.color.closeRe=new RegExp(escapeStringRegexp(ansiStyles.color.close),"g");for(const e of Object.keys(ansiStyles.color.ansi))a.has(e)||(i[e]={get(){const r=this.level;return function(){const t={open:ansiStyles.color[s[r]][e].apply(null,arguments),close:ansiStyles.color.close,closeRe:ansiStyles.color.closeRe};return n.call(this,this._styles?this._styles.concat(t):[t],this._empty,e)}}});ansiStyles.bgColor.closeRe=new RegExp(escapeStringRegexp(ansiStyles.bgColor.close),"g");for(const e of Object.keys(ansiStyles.bgColor.ansi)){if(a.has(e))continue;i["bg"+e[0].toUpperCase()+e.slice(1)]={get(){const r=this.level;return function(){const t={open:ansiStyles.bgColor[s[r]][e].apply(null,arguments),close:ansiStyles.bgColor.close,closeRe:ansiStyles.bgColor.closeRe};return n.call(this,this._styles?this._styles.concat(t):[t],this._empty,e)}}}}const l=Object.defineProperties(()=>{},i);Object.defineProperties(t.prototype,i),e.exports=t(),e.exports.supportsColor=supportsColor,e.exports.default=e.exports}),chalk_1=chalk.supportsColor,ansiStyles$3=createCommonjsModule(function(e){Object.defineProperty(e,"exports",{enumerable:!0,get:function(){var e={modifiers:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},colors:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39]},bgColors:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49]}};return e.colors.grey=e.colors.gray,Object.keys(e).forEach(function(r){var t=e[r];Object.keys(t).forEach(function(r){var n=t[r];e[r]=t[r]={open:"["+n[0]+"m",close:"["+n[1]+"m"}}),Object.defineProperty(e,r,{value:t,enumerable:!1})}),e}})}),ansiRegex$1=function(){return/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-PRZcf-nqry=><]/g},ansiRegex=ansiRegex$1(),stripAnsi=function(e){return"string"==typeof e?e.replace(ansiRegex,""):e},ansiRegex$3=function(){return/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-PRZcf-nqry=><]/g},re=new RegExp(ansiRegex$3().source),hasAnsi=re.test.bind(re),argv=process.argv,terminator=argv.indexOf("--"),hasFlag$3=function(e){e="--"+e;var r=argv.indexOf(e);return-1!==r&&(-1===terminator||r<terminator)},supportsColor$3="FORCE_COLOR"in process.env||!(hasFlag$3("no-color")||hasFlag$3("no-colors")||hasFlag$3("color=false"))&&(!!(hasFlag$3("color")||hasFlag$3("colors")||hasFlag$3("color=true")||hasFlag$3("color=always"))||!(process.stdout&&!process.stdout.isTTY)&&("win32"===process.platform||("COLORTERM"in process.env||"dumb"!==process.env.TERM&&!!/^screen|^xterm|^vt100|color|ansi|cygwin|linux/i.test(process.env.TERM)))),defineProps=Object.defineProperties,isSimpleWindowsTerm="win32"===process.platform&&!/^xterm/i.test(process.env.TERM);isSimpleWindowsTerm&&(ansiStyles$3.blue.open="[94m");var styles=function(){var e={};return Object.keys(ansiStyles$3).forEach(function(r){ansiStyles$3[r].closeRe=new RegExp(escapeStringRegexp(ansiStyles$3[r].close),"g"),e[r]={get:function(){return build.call(this,this._styles.concat(r))}}}),e}(),proto=defineProps(function(){},styles);defineProps(Chalk.prototype,init());var chalk$2=new Chalk,styles_1=ansiStyles$3,hasColor=hasAnsi,stripColor=stripAnsi,supportsColor_1=supportsColor$3;chalk$2.styles=styles_1,chalk$2.hasColor=hasColor,chalk$2.stripColor=stripColor,chalk$2.supportsColor=supportsColor_1;var mimicFn=(e,r)=>{for(const t of Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r)))Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))},onetime=createCommonjsModule(function(e){e.exports=((e,r)=>{if(!0===r)throw new TypeError("The second argument is now an options object");if("function"!=typeof e)throw new TypeError("Expected a function");r=r||{};let t,n=!1;const o=e.displayName||e.name||"<anonymous>",s=function(){if(n){if(!0===r.throw)throw new Error(`Function \`${o}\` can only be called once`);return t}return n=!0,t=e.apply(this,arguments),e=null,t};return mimicFn(s,e),s})}),signals$1=createCommonjsModule(function(e){e.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"],"win32"!==process.platform&&e.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),"linux"===process.platform&&e.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")}),signals=signals$1,EE=events;"function"!=typeof EE&&(EE=EE.EventEmitter);var emitter;process.__signal_exit_emitter__?emitter=process.__signal_exit_emitter__:((emitter=process.__signal_exit_emitter__=new EE).count=0,emitter.emitted={}),emitter.infinite||(emitter.setMaxListeners(1/0),emitter.infinite=!0);var signalExit=function(e,r){assert.equal(typeof e,"function","a callback must be provided for exit handler"),!1===loaded&&load();var t="exit";r&&r.alwaysLast&&(t="afterexit");return emitter.on(t,e),function(){emitter.removeListener(t,e),0===emitter.listeners("exit").length&&0===emitter.listeners("afterexit").length&&unload()}},unload_1=unload,sigListeners={};signals.forEach(function(e){sigListeners[e]=function(){process.listeners(e).length===emitter.count&&(unload(),emit("exit",null,e),emit("afterexit",null,e),process.kill(process.pid,e))}});var signals_1=function(){return signals},load_1=load,loaded=!1,originalProcessReallyExit=process.reallyExit,originalProcessEmit=process.emit;signalExit.unload=unload_1,signalExit.signals=signals_1,signalExit.load=load_1;var restoreCursor=onetime(()=>{signalExit(()=>{process.stderr.write("[?25h")},{alwaysLast:!0})}),cliCursor=createCommonjsModule(function(e,r){let t=!1;r.show=(e=>{const r=e||process.stderr;r.isTTY&&(t=!1,r.write("[?25h"))}),r.hide=(e=>{const r=e||process.stderr;r.isTTY&&(restoreCursor(),t=!0,r.write("[?25l"))}),r.toggle=((e,n)=>{void 0!==e&&(t=e),t?r.show(n):r.hide(n)})}),cliCursor_1=cliCursor.show,cliCursor_2=cliCursor.hide,cliCursor_3=cliCursor.toggle,dots={interval:80,frames:["⠋","⠙","⠹","⠸","⠼","⠴","⠦","⠧","⠇","⠏"]},dots2={interval:80,frames:["⣾","⣽","⣻","⢿","⡿","⣟","⣯","⣷"]},dots3={interval:80,frames:["⠋","⠙","⠚","⠞","⠖","⠦","⠴","⠲","⠳","⠓"]},dots4={interval:80,frames:["⠄","⠆","⠇","⠋","⠙","⠸","⠰","⠠","⠰","⠸","⠙","⠋","⠇","⠆"]},dots5={interval:80,frames:["⠋","⠙","⠚","⠒","⠂","⠂","⠒","⠲","⠴","⠦","⠖","⠒","⠐","⠐","⠒","⠓","⠋"]},dots6={interval:80,frames:["⠁","⠉","⠙","⠚","⠒","⠂","⠂","⠒","⠲","⠴","⠤","⠄","⠄","⠤","⠴","⠲","⠒","⠂","⠂","⠒","⠚","⠙","⠉","⠁"]},dots7={interval:80,frames:["⠈","⠉","⠋","⠓","⠒","⠐","⠐","⠒","⠖","⠦","⠤","⠠","⠠","⠤","⠦","⠖","⠒","⠐","⠐","⠒","⠓","⠋","⠉","⠈"]},dots8={interval:80,frames:["⠁","⠁","⠉","⠙","⠚","⠒","⠂","⠂","⠒","⠲","⠴","⠤","⠄","⠄","⠤","⠠","⠠","⠤","⠦","⠖","⠒","⠐","⠐","⠒","⠓","⠋","⠉","⠈","⠈"]},dots9={interval:80,frames:["⢹","⢺","⢼","⣸","⣇","⡧","⡗","⡏"]},dots10={interval:80,frames:["⢄","⢂","⢁","⡁","⡈","⡐","⡠"]},dots11={interval:100,frames:["⠁","⠂","⠄","⡀","⢀","⠠","⠐","⠈"]},dots12={interval:80,frames:["⢀⠀","⡀⠀","⠄⠀","⢂⠀","⡂⠀","⠅⠀","⢃⠀","⡃⠀","⠍⠀","⢋⠀","⡋⠀","⠍⠁","⢋⠁","⡋⠁","⠍⠉","⠋⠉","⠋⠉","⠉⠙","⠉⠙","⠉⠩","⠈⢙","⠈⡙","⢈⠩","⡀⢙","⠄⡙","⢂⠩","⡂⢘","⠅⡘","⢃⠨","⡃⢐","⠍⡐","⢋⠠","⡋⢀","⠍⡁","⢋⠁","⡋⠁","⠍⠉","⠋⠉","⠋⠉","⠉⠙","⠉⠙","⠉⠩","⠈⢙","⠈⡙","⠈⠩","⠀⢙","⠀⡙","⠀⠩","⠀⢘","⠀⡘","⠀⠨","⠀⢐","⠀⡐","⠀⠠","⠀⢀","⠀⡀"]},line={interval:130,frames:["-","\\","|","/"]},line2={interval:100,frames:["⠂","-","–","—","–","-"]},pipe={interval:100,frames:["┤","┘","┴","└","├","┌","┬","┐"]},simpleDots={interval:400,frames:[".  ",".. ","...","   "]},simpleDotsScrolling={interval:200,frames:[".  ",".. ","..."," ..","  .","   "]},star={interval:70,frames:["✶","✸","✹","✺","✹","✷"]},star2={interval:80,frames:["+","x","*"]},flip={interval:70,frames:["_","_","_","-","`","`","'","´","-","_","_","_"]},hamburger={interval:100,frames:["☱","☲","☴"]},growVertical={interval:120,frames:["▁","▃","▄","▅","▆","▇","▆","▅","▄","▃"]},growHorizontal={interval:120,frames:["▏","▎","▍","▌","▋","▊","▉","▊","▋","▌","▍","▎"]},balloon={interval:140,frames:[" ",".","o","O","@","*"," "]},balloon2={interval:120,frames:[".","o","O","°","O","o","."]},noise={interval:100,frames:["▓","▒","░"]},bounce={interval:120,frames:["⠁","⠂","⠄","⠂"]},boxBounce={interval:120,frames:["▖","▘","▝","▗"]},boxBounce2={interval:100,frames:["▌","▀","▐","▄"]},triangle={interval:50,frames:["◢","◣","◤","◥"]},arc={interval:100,frames:["◜","◠","◝","◞","◡","◟"]},circle={interval:120,frames:["◡","⊙","◠"]},squareCorners={interval:180,frames:["◰","◳","◲","◱"]},circleQuarters={interval:120,frames:["◴","◷","◶","◵"]},circleHalves={interval:50,frames:["◐","◓","◑","◒"]},squish={interval:100,frames:["╫","╪"]},toggle={interval:250,frames:["⊶","⊷"]},toggle2={interval:80,frames:["▫","▪"]},toggle3={interval:120,frames:["□","■"]},toggle4={interval:100,frames:["■","□","▪","▫"]},toggle5={interval:100,frames:["▮","▯"]},toggle6={interval:300,frames:["ဝ","၀"]},toggle7={interval:80,frames:["⦾","⦿"]},toggle8={interval:100,frames:["◍","◌"]},toggle9={interval:100,frames:["◉","◎"]},toggle10={interval:100,frames:["㊂","㊀","㊁"]},toggle11={interval:50,frames:["⧇","⧆"]},toggle12={interval:120,frames:["☗","☖"]},toggle13={interval:80,frames:["=","*","-"]},arrow={interval:100,frames:["←","↖","↑","↗","→","↘","↓","↙"]},arrow2={interval:80,frames:["⬆️ ","↗️ ","➡️ ","↘️ ","⬇️ ","↙️ ","⬅️ ","↖️ "]},arrow3={interval:120,frames:["▹▹▹▹▹","▸▹▹▹▹","▹▸▹▹▹","▹▹▸▹▹","▹▹▹▸▹","▹▹▹▹▸"]},bouncingBar={interval:80,frames:["[    ]","[=   ]","[==  ]","[=== ]","[ ===]","[  ==]","[   =]","[    ]","[   =]","[  ==]","[ ===]","[====]","[=== ]","[==  ]","[=   ]"]},bouncingBall={interval:80,frames:["( ●    )","(  ●   )","(   ●  )","(    ● )","(     ●)","(    ● )","(   ●  )","(  ●   )","( ●    )","(●     )"]},smiley={interval:200,frames:["😄 ","😝 "]},monkey={interval:300,frames:["🙈 ","🙈 ","🙉 ","🙊 "]},hearts={interval:100,frames:["💛 ","💙 ","💜 ","💚 ","❤️ "]},clock={interval:100,frames:["🕐 ","🕑 ","🕒 ","🕓 ","🕔 ","🕕 ","🕖 ","🕗 ","🕘 ","🕙 ","🕚 "]},earth={interval:180,frames:["🌍 ","🌎 ","🌏 "]},moon={interval:80,frames:["🌑 ","🌒 ","🌓 ","🌔 ","🌕 ","🌖 ","🌗 ","🌘 "]},runner={interval:140,frames:["🚶 ","🏃 "]},pong={interval:80,frames:["▐⠂       ▌","▐⠈       ▌","▐ ⠂      ▌","▐ ⠠      ▌","▐  ⡀     ▌","▐  ⠠     ▌","▐   ⠂    ▌","▐   ⠈    ▌","▐    ⠂   ▌","▐    ⠠   ▌","▐     ⡀  ▌","▐     ⠠  ▌","▐      ⠂ ▌","▐      ⠈ ▌","▐       ⠂▌","▐       ⠠▌","▐       ⡀▌","▐      ⠠ ▌","▐      ⠂ ▌","▐     ⠈  ▌","▐     ⠂  ▌","▐    ⠠   ▌","▐    ⡀   ▌","▐   ⠠    ▌","▐   ⠂    ▌","▐  ⠈     ▌","▐  ⠂     ▌","▐ ⠠      ▌","▐ ⡀      ▌","▐⠠       ▌"]},shark={interval:120,frames:["▐|\\____________▌","▐_|\\___________▌","▐__|\\__________▌","▐___|\\_________▌","▐____|\\________▌","▐_____|\\_______▌","▐______|\\______▌","▐_______|\\_____▌","▐________|\\____▌","▐_________|\\___▌","▐__________|\\__▌","▐___________|\\_▌","▐____________|\\▌","▐____________/|▌","▐___________/|_▌","▐__________/|__▌","▐_________/|___▌","▐________/|____▌","▐_______/|_____▌","▐______/|______▌","▐_____/|_______▌","▐____/|________▌","▐___/|_________▌","▐__/|__________▌","▐_/|___________▌","▐/|____________▌"]},dqpb={interval:100,frames:["d","q","p","b"]},weather={interval:100,frames:["☀️ ","☀️ ","☀️ ","🌤 ","⛅️ ","🌥 ","☁️ ","🌧 ","🌨 ","🌧 ","🌨 ","🌧 ","🌨 ","⛈ ","🌨 ","🌧 ","🌨 ","☁️ ","🌥 ","⛅️ ","🌤 ","☀️ ","☀️ "]},christmas={interval:400,frames:["🌲","🎄"]},spinners={dots:dots,dots2:dots2,dots3:dots3,dots4:dots4,dots5:dots5,dots6:dots6,dots7:dots7,dots8:dots8,dots9:dots9,dots10:dots10,dots11:dots11,dots12:dots12,line:line,line2:line2,pipe:pipe,simpleDots:simpleDots,simpleDotsScrolling:simpleDotsScrolling,star:star,star2:star2,flip:flip,hamburger:hamburger,growVertical:growVertical,growHorizontal:growHorizontal,balloon:balloon,balloon2:balloon2,noise:noise,bounce:bounce,boxBounce:boxBounce,boxBounce2:boxBounce2,triangle:triangle,arc:arc,circle:circle,squareCorners:squareCorners,circleQuarters:circleQuarters,circleHalves:circleHalves,squish:squish,toggle:toggle,toggle2:toggle2,toggle3:toggle3,toggle4:toggle4,toggle5:toggle5,toggle6:toggle6,toggle7:toggle7,toggle8:toggle8,toggle9:toggle9,toggle10:toggle10,toggle11:toggle11,toggle12:toggle12,toggle13:toggle13,arrow:arrow,arrow2:arrow2,arrow3:arrow3,bouncingBar:bouncingBar,bouncingBall:bouncingBall,smiley:smiley,monkey:monkey,hearts:hearts,clock:clock,earth:earth,moon:moon,runner:runner,pong:pong,shark:shark,dqpb:dqpb,weather:weather,christmas:christmas},spinners$1=Object.freeze({dots:dots,dots2:dots2,dots3:dots3,dots4:dots4,dots5:dots5,dots6:dots6,dots7:dots7,dots8:dots8,dots9:dots9,dots10:dots10,dots11:dots11,dots12:dots12,line:line,line2:line2,pipe:pipe,simpleDots:simpleDots,simpleDotsScrolling:simpleDotsScrolling,star:star,star2:star2,flip:flip,hamburger:hamburger,growVertical:growVertical,growHorizontal:growHorizontal,balloon:balloon,balloon2:balloon2,noise:noise,bounce:bounce,boxBounce:boxBounce,boxBounce2:boxBounce2,triangle:triangle,arc:arc,circle:circle,squareCorners:squareCorners,circleQuarters:circleQuarters,circleHalves:circleHalves,squish:squish,toggle:toggle,toggle2:toggle2,toggle3:toggle3,toggle4:toggle4,toggle5:toggle5,toggle6:toggle6,toggle7:toggle7,toggle8:toggle8,toggle9:toggle9,toggle10:toggle10,toggle11:toggle11,toggle12:toggle12,toggle13:toggle13,arrow:arrow,arrow2:arrow2,arrow3:arrow3,bouncingBar:bouncingBar,bouncingBall:bouncingBall,smiley:smiley,monkey:monkey,hearts:hearts,clock:clock,earth:earth,moon:moon,runner:runner,pong:pong,shark:shark,dqpb:dqpb,weather:weather,christmas:christmas,default:spinners}),require$$0$2=spinners$1&&spinners||spinners$1,cliSpinners=require$$0$2,ansiStyles$6=createCommonjsModule(function(e){Object.defineProperty(e,"exports",{enumerable:!0,get:function(){var e={modifiers:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},colors:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39]},bgColors:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49]}};return e.colors.grey=e.colors.gray,Object.keys(e).forEach(function(r){var t=e[r];Object.keys(t).forEach(function(r){var n=t[r];e[r]=t[r]={open:"["+n[0]+"m",close:"["+n[1]+"m"}}),Object.defineProperty(e,r,{value:t,enumerable:!1})}),e}})}),ansiRegex$7=function(){return/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-PRZcf-nqry=><]/g},ansiRegex$6=ansiRegex$7(),stripAnsi$3=function(e){return"string"==typeof e?e.replace(ansiRegex$6,""):e},argv$1=process.argv,terminator$1=argv$1.indexOf("--"),hasFlag$4=function(e){e="--"+e;var r=argv$1.indexOf(e);return-1!==r&&(-1===terminator$1||r<terminator$1)},supportsColor$6="FORCE_COLOR"in process.env||!(hasFlag$4("no-color")||hasFlag$4("no-colors")||hasFlag$4("color=false"))&&(!!(hasFlag$4("color")||hasFlag$4("colors")||hasFlag$4("color=true")||hasFlag$4("color=always"))||!(process.stdout&&!process.stdout.isTTY)&&("win32"===process.platform||("COLORTERM"in process.env||"dumb"!==process.env.TERM&&!!/^screen|^xterm|^vt100|color|ansi|cygwin|linux/i.test(process.env.TERM)))),defineProps$1=Object.defineProperties,isSimpleWindowsTerm$1="win32"===process.platform&&!/^xterm/i.test(process.env.TERM);isSimpleWindowsTerm$1&&(ansiStyles$6.blue.open="[94m");var styles$1=function(){var e={};return Object.keys(ansiStyles$6).forEach(function(r){ansiStyles$6[r].closeRe=new RegExp(escapeStringRegexp(ansiStyles$6[r].close),"g"),e[r]={get:function(){return build$1.call(this,this._styles.concat(r))}}}),e}(),proto$1=defineProps$1(function(){},styles$1);defineProps$1(Chalk$1.prototype,init$1());var chalk$4=new Chalk$1,styles_1$1=ansiStyles$6,hasColor$1=hasAnsi,stripColor$1=stripAnsi$3,supportsColor_1$1=supportsColor$6;chalk$4.styles=styles_1$1,chalk$4.hasColor=hasColor$1,chalk$4.stripColor=stripColor$1,chalk$4.supportsColor=supportsColor_1$1;var main={info:chalk$4.blue("ℹ"),success:chalk$4.green("✔"),warning:chalk$4.yellow("⚠"),error:chalk$4.red("✖")},win={info:chalk$4.blue("i"),success:chalk$4.green("√"),warning:chalk$4.yellow("‼"),error:chalk$4.red("×")},logSymbols="win32"===process.platform?win:main,ora=createCommonjsModule(function(e){class r{constructor(e){"string"==typeof e&&(e={text:e}),this.options=Object.assign({text:"",color:"cyan",stream:process.stderr},e);const r=this.options.spinner;if(this.spinner="object"==typeof r?r:"win32"===process.platform?cliSpinners.line:cliSpinners[r]||cliSpinners.dots,void 0===this.spinner.frames)throw new Error("Spinner must define `frames`");this.text=this.options.text,this.color=this.options.color,this.interval=this.options.interval||this.spinner.interval||100,this.stream=this.options.stream,this.id=null,this.frameIndex=0,this.enabled="boolean"==typeof this.options.enabled?this.options.enabled:this.stream&&this.stream.isTTY&&!process.env.CI}frame(){const e=this.spinner.frames;let r=e[this.frameIndex];return this.color&&(r=chalk$2[this.color](r)),this.frameIndex=++this.frameIndex%e.length,r+" "+this.text}clear(){return this.enabled?(this.stream.clearLine(),this.stream.cursorTo(0),this):this}render(){return this.clear(),this.stream.write(this.frame()),this}start(e){return e&&(this.text=e),!this.enabled||this.id?this:(cliCursor.hide(this.stream),this.render(),this.id=setInterval(this.render.bind(this),this.interval),this)}stop(){return this.enabled?(clearInterval(this.id),this.id=null,this.frameIndex=0,this.clear(),cliCursor.show(this.stream),this):this}succeed(e){return this.stopAndPersist({symbol:logSymbols.success,text:e})}fail(e){return this.stopAndPersist({symbol:logSymbols.error,text:e})}warn(e){return this.stopAndPersist({symbol:logSymbols.warning,text:e})}info(e){return this.stopAndPersist({symbol:logSymbols.info,text:e})}stopAndPersist(e){return"string"==typeof e&&(e={symbol:e}),e=e||{},this.stop(),this.stream.write(`${e.symbol||" "} ${e.text||this.text}\n`),this}}e.exports=function(e){return new r(e)},e.exports.promise=((e,t)=>{if("function"!=typeof e.then)throw new TypeError("Parameter `action` must be a Promise");const n=new r(t);return n.start(),e.then(()=>{n.succeed()},()=>{n.fail()}),n})}),ora_1=ora.promise;const delay=e=>new Promise(r=>setTimeout(r,e)),capitalize=e=>e.charAt(0).toUpperCase()+e.slice(1),controllerTemplate=e=>`import { Router } from "express";\nimport { RouteError } from "helpers/route_helpers";\n\nclass ${e}Controller {\n  constructor() {\n    this.router = new Router();\n  }\n\n  index = async (req, res) => {\n    try {\n        res.send({\n          hello: "${e}"\n        });\n    } catch (err) {\n        RouteError(res, "Something broke!")\n    }\n  };\n\n  routes = () => {\n    this.router.get("/", this.index);\n    return this.router;\n  };\n}\n\nexport default new ${e}Controller();\n`,libDir=path.resolve(__dirname,"../src/templates"),log=console.log,execAsync=util.promisify(child_process.exec),generateProject=async(e="",r)=>{e.length||({project_name:e}=await inquirer.prompt([{type:"input",name:"project_name",message:"Project name:"}]));const t=ora("Copying webpack configuration").start();await fsExtra.copy(`${libDir}/webpack.config.js`,`./${e}/webpack.config.babel.js`),await fsExtra.copy(`${libDir}/webpack.config.dist.js`,`./${e}/webpack.config.dist.babel.js`),await delay(250),t.text="Copying babel configuration",await fsExtra.copy(`${libDir}/babelrc.json`,`./${e}/.babelrc`),await delay(250),t.text="Copying .env files",await fsExtra.copy(`${libDir}/.env`,`./${e}/.env`),await fsExtra.copy(`${libDir}/.env.example`,`./${e}/.env.example`),await delay(250),t.text="Copying Hot Module Replacement configuration",await fsExtra.copy(`${libDir}/index.js`,`./${e}/src/index.js`),await delay(250),t.text="Copying server file",await fsExtra.copy(`${libDir}/server.js`,`./${e}/src/server.js`),await delay(250),t.text="Creating example route-controller",await fsExtra.mkdirp(`./${e}/src/controllers`),await fsExtra.writeFile(`./${e}/src/controllers/home_controller.js`,controllerTemplate("Home")),await delay(250),t.text="Creating route helpers",await fsExtra.mkdirp(`./${e}/src/helpers`),await fsExtra.copy(`${libDir}/route_helpers.js`,`./${e}/src/helpers/route_helpers.js`),await delay(250),t.text="Installing dependencies",await execAsync(`cd ./${e} && yarn init -y && yarn add express && yarn add webpack clean-webpack-plugin webpack-node-externals start-server-webpack-plugin dotenv-webpack babel-loader babel-preset-env babel-core babel-preset-stage-2 --dev`),t.text="Adding scripts to package.json";const n=await fsExtra.readJson(`./${e}/package.json`);n.scripts={start:"webpack --config webpack.config.babel.js",build:"webpack --config webpack.config.dist.babel.js"},await fsExtra.writeFile(`./${e}/package.json`,JSON.stringify(n,null,2)),t.text="Project generated.",t.succeed(),log(`CD into /${e}, run yarn start and go to http://localhost:3000 to get started!`)},generateController=async(e,r)=>{try{await fsExtra.mkdirp("./src/controllers"),await fsExtra.writeFile(`./src/controllers/${e}_controller.js`,controllerTemplate(capitalize(e)));const r=await fsExtra.readFile("./src/server.js"),{tree:t,locations:n,comments:o}=shiftParser.parseModuleWithLocation(r.toString("utf-8"));let s=!1,a=null,i=null;if(t.items.forEach((r,t)=>{"Import"===r.type&&r.defaultBinding&&r.defaultBinding.name.includes("Controller")&&(a=t),"ExpressionStatement"===r.type&&r.expression.arguments&&r.expression.arguments.filter(e=>e.callee&&"routes"===e.callee.property).length&&(i=t),"ExpressionStatement"===r.type&&r.expression.arguments&&r.expression.arguments.filter(r=>r.callee&&r.callee.object&&r.callee.object.name===`${capitalize(e)}Controller`).length&&(s=!0)}),s)return void console.log(chalk.red`Controller already exists`);t.items.splice(a+1,0,{type:"Import",defaultBinding:{type:"BindingIdentifier",name:`${capitalize(e)}Controller`},namedImports:[],moduleSpecifier:`controllers/${e}_controller`}),t.items.splice(i+2,0,{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"StaticMemberExpression",object:{type:"IdentifierExpression",name:"server"},property:"use"},arguments:[{type:"LiteralStringExpression",value:`/${e}`},{type:"CallExpression",callee:{type:"StaticMemberExpression",object:{type:"IdentifierExpression",name:`${capitalize(e)}Controller`},property:"routes"},arguments:[]}]}}),await fsExtra.writeFile("./src/server.js",prettier.format(codegen(t))),log(`${capitalize(e)}Controller created.`)}catch(e){e.description&&e.description.includes("Duplicate binding")&&console.log(chalk.red`Controller already exists`)}};program.version("0.0.1"),program.command("init [project_name]").description("Create a new project.").action(generateProject),program.command("controller [controller_name]").description("Create a new controller.").action(generateController),program.parse(process.argv);
